//The following 3 lines will be removed temporarily because if these lines are added, 
//anything added to the homepage parsys will be overlayed with the feature stories. 

//div.featured-stories {
//  @include grid-column(24);
//}
.featured-stories {
  margin: 0;
  position: relative;
  overflow: visible;
  p {
    margin: 0;
  }
  > li {
    width: 100%;
    margin-bottom: 1%;
    margin-right: 0;
    margin-left: 0;
    h2 {
      font-size: rem-calc(26);
      font-weight: 300;
    }
    .thumb {
      cursor: pointer;
      text-align: center;
      padding: rem-calc(30);
      min-height: rem-calc(280);
      height: 100%;
      [class^="icon-"],
      [class*=" icon-"] {
        font-size: rem-calc(60);
      }
      & * {
        color: $white;
      }
    }
    .story {
      // display: none;
      width: 100%;
      position: absolute;
      top: 0;
      z-index: -1;
      color: #333;
      left: 0;
      opacity: 0;
      visibility: hidden;
      transition: visibility 0s linear 0.5s,opacity 0.5s linear;
      @media #{$medium-up} {
        max-height: rem-calc(570);
      }
      height: 100%;
      .bg-wrapper {
        height: 100%;
        @include grid-column(24);
      }
      .header {
        @include grid-row();
        padding-top: rem-calc(10);
        * {
          color: $white;
        }
        h3 {
          font-weight: 300;
          margin-top: 1.4%;
        }
        .icon-cross {
          @media #{$medium-up} {
            @include grid-column(1, $float:right);
          }
          @include grid-column(2, $float:right);
          font-size: rem-calc(40);
          cursor: pointer;
        }
        .left-wrapper {
          @media #{$medium-up} {
            @include grid-column(22, $offset:1, $collapse: true);
          }
          @include grid-column(22);
          [class*=" icon-"],
          [class^="icon-"] {
            font-size: rem-calc(60);
            float: left;
            margin-right: rem-calc(10);
          }
        }
      }
      .mobile-centered {
         @media #{$small-only} {
          text-align: center;
        }
      }
      .mobile-header {
        .show-for-small {
          text-align: center;
          [class*=" icon-"],
          [class^="icon-"] {
            font-size: rem-calc(60);
          }
        }
      }
      .contents {
        @include grid-column(22, $center:true, $collapse:true);
        margin-top: rem-calc(10);
      }
      &.no-padding {
        .bg-wrapper {
          margin-left: 0;
          margin-right: 0;
          padding-left: 0;
          padding-right: 0;
          width: 100%;
          float: none;
        }
        .contents {
          @include grid-column(24, $center:true, $collapse:true);
          margin-left: 0;
          margin-right: 0;
        }
      }
      &.colorless {
        .left-wrapper {
          & * {color: $white;}
          text-align: center;
          @include grid-column(10, $collapse:true);
          min-height: rem-calc(545);
          position: relative;
          @media #{$small-only} {
            width: 100%;
          }
          [class*=" icon-"],
          [class^="icon-"] {
            float: none;
            display: block;
            margin-bottom: rem-calc(38);
            font-size: rem-calc(60);
          }
          .text {
            padding-left: rem-calc(20);
            text-align: left;
            .desc {
              margin-bottom: rem-calc(30);
              font-weight: 600;
            }
          }
          p {
            font-size: rem-calc(20);
          }
          .button {
            margin-top: rem-calc(40);
            margin-left: auto;
            margin-right: auto;
            left: rem-calc(18);
            right: rem-calc(18);
            position: absolute;
            bottom: 0;
            box-shadow: inset 0 0 0 99999px rgba(0,0,0,.3);
          }
        }
        .icon-cross {
          @media #{$medium-up} {
            position: absolute;
            right: 0;
          }
        }
      }
      &.video {
        .contents {
          & * {
            color: $white;
          }
          p {
            font-size: rem-calc(20);
            margin-bottom: rem-calc(10);
          }
          .left-float {
            @media #{$medium-up} {
              @include grid-column(9);
            }
          }
          .right-float {
            @media #{$medium-up} {
              @include grid-column(14);
              float: right;
            }
            .feature-video-slider {
              .video-embed  {
                max-height: rem-calc(317);
                height: 100%;
                overflow: hidden;
                iframe {
                  height: rem-calc(317);
                }
                img.slide-thumb {
                  display: none;
                  visibility: hidden;
                }
              }
              .slick-slide {
                // margin-bottom: 0 !important;
              }
              .slick-dots {
                margin: 2% 0 0 0;
                position: static;
                li {
                  width: 23.493976%;
                  margin: 0 1%;
                  height: 100%;
                  &:first-child {
                    margin-left:0;
                  }
                  &:last-child {
                    margin-right: 0;
                  }
                  @media #{$medium-up} {

                  }
                }
              }
            }
          }
          .button {
            box-shadow: inset 0 0 0 99999px rgba(0,0,0,.3);
          }
        }
      }
      &.shown {
        opacity: 1;
        z-index: 2;
        visibility: visible;
        transition-delay: 0s;
      }
    }
    &:only-child {
      max-width: 100%;
    }
    &:first-child:nth-last-child(2) ~ li,
    &:first-child:nth-last-child(2),
    &:first-child:nth-last-child(3n+5) ~ li,
    &:first-child:nth-last-child(3n+5) {
     // max-width: (98 / 2) * 1%;
      max-width: 49.479167%;
      margin-right: 1.04%;
    }
    &:first-child:nth-last-child(3n+5) ~ li:nth-child(3n+2) {
      margin-right: 0;
    }
    &:first-child:nth-last-child(3) ~ li,
    &:first-child:nth-last-child(3),
    &:first-child:nth-last-child(4) ~ li,
    &:first-child:nth-last-child(3n+6) ~ li,
    &:first-child:nth-last-child(3n+5) + li ~ li,
    &:first-child:nth-last-child(3n+6) {
      //max-width: (98 / 3) * 1%;
      max-width: 32.638889%;
      margin-right: 1.04%;
    }
    &:first-child:nth-last-child(4) .thumb {
      margin: rem-calc(17);
      max-width: 32.638889%;
    }
    &:first-child:nth-last-child(3n+6) ~ li:nth-child(3n) {
      margin-right: 0;
    }
    &:nth-last-of-type(1) {
      margin-right: 0 !important;
    }
    @media #{$small-only} {
      max-width: 100% !important;
      width: 100%;
      float: none;
    }
  }
}
