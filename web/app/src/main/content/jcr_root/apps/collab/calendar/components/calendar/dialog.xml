<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:cq="http://www.day.com/jcr/cq/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
    jcr:primaryType="cq:Dialog"
    height="{Long}420"
    xtype="dialog">
    <items
        jcr:primaryType="cq:Widget"
        xtype="tabpanel">
        <items jcr:primaryType="cq:WidgetCollection">
            <general
                jcr:primaryType="cq:Panel"
                title="General">
                <items jcr:primaryType="cq:WidgetCollection">
                    <dateformat
                        jcr:primaryType="cq:Widget"
                        defaultValue="locale"
                        fieldLabel="Date format"
                        name="./dateFormat"
                        type="select"
                        xtype="selection">
                        <options jcr:primaryType="cq:WidgetCollection">
                            <locale
                                jcr:primaryType="nt:unstructured"
                                text="Locale dependent"
                                value="locale"/>
                            <littleendian
                                jcr:primaryType="nt:unstructured"
                                text_noI18n="25.09.2009"
                                value="littleEndian"/>
                            <middleendian
                                jcr:primaryType="nt:unstructured"
                                text_noI18n="09/25/2009"
                                value="middleEndian"/>
                            <bigendian
                                jcr:primaryType="nt:unstructured"
                                text_noI18n="2009-09-25"
                                value="bigEndian"/>
                        </options>
                    </dateformat>
                    <timeformat
                        jcr:primaryType="cq:Widget"
                        defaultValue="locale"
                        fieldLabel="Time format"
                        name="./timeFormat"
                        type="select"
                        xtype="selection">
                        <options jcr:primaryType="cq:WidgetCollection">
                            <locale
                                jcr:primaryType="nt:unstructured"
                                text="Locale dependent"
                                value="locale"/>
                            <twelvehourclock
                                jcr:primaryType="nt:unstructured"
                                text_noI18n="1 pm"
                                value="12hclock"/>
                            <twentyfourhourclock
                                jcr:primaryType="nt:unstructured"
                                text_noI18n="13:00"
                                value="24hclock"/>
                        </options>
                    </timeformat>
                    <startofweek
                        jcr:primaryType="cq:Widget"
                        defaultValue="locale"
                        fieldLabel="Start of week"
                        name="./startOfWeek"
                        type="select"
                        xtype="selection">
                        <options jcr:primaryType="cq:WidgetCollection">
                            <locale
                                jcr:primaryType="nt:unstructured"
                                text="Locale dependent"
                                value="locale"/>
                            <sunday
                                jcr:primaryType="nt:unstructured"
                                text="Sunday"
                                value="SU"/>
                            <monday
                                jcr:primaryType="nt:unstructured"
                                text="Monday"
                                value="MO"/>
                            <tuesday
                                jcr:primaryType="nt:unstructured"
                                text="Tuesday"
                                value="TU"/>
                            <wednesday
                                jcr:primaryType="nt:unstructured"
                                text="Wednesday"
                                value="WE"/>
                            <thursday
                                jcr:primaryType="nt:unstructured"
                                text="Thursday"
                                value="TH"/>
                            <friday
                                jcr:primaryType="nt:unstructured"
                                text="Friday"
                                value="FR"/>
                            <saturday
                                jcr:primaryType="nt:unstructured"
                                text="Saturday"
                                value="SA"/>
                        </options>
                    </startofweek>
                    <timezone
                        jcr:primaryType="cq:Widget"
                        fieldLabel="Time zone"
                        name="./timeZone"
                        options="$PATH.timezones.json"
                        type="select"
                        xtype="selection">
                        <optionsConfig
                            jcr:primaryType="nt:unstructured"
                            anyMatch="{Boolean}true"
                            editable="{Boolean}true"
                            forceSelection="{Boolean}true"/>
                    </timezone>
                </items>
            </general>
            <subscriptions
                jcr:primaryType="cq:Panel"
                title="Subscriptions / Import">
                <items jcr:primaryType="cq:WidgetCollection">
                    <importbutton
                        jcr:primaryType="cq:Widget"
                        border="false"
                        fieldDescription="&lt;br/>"
                        fieldLabel="Import file"
                        xtype="cq.compositefield">
                        <items jcr:primaryType="cq:WidgetCollection">
                            <icsimportdialogbutton
                                jcr:primaryType="cq:Widget"
                                fileDescription="Select an icalendar (*.ics) file"
                                success="function() { CQ.search.Util.getQueryBuilder().submit(); this.handleSuccess(); }"
                                text="Upload ICS file"
                                xtype="fileuploaddialogbutton">
                                <listeners
                                    jcr:primaryType="nt:unstructured"
                                    click="function(button) { button.dialogConfig.formUrl = button.findParentByType('dialog').path + '/calendars/default.ics'; button.handleClick(); }"/>
                            </icsimportdialogbutton>
                        </items>
                    </importbutton>
                    <subscriptions
                        jcr:primaryType="cq:Widget"
                        fieldLabel="Subscribed calendars/events"
                        name="./subscriptions"
                        orderable="false"
                        typeHint="String"
                        xtype="multifield">
                        <fieldConfig
                            jcr:primaryType="nt:unstructured"
                            predicate="nosystem"
                            rootPath="/"
                            showTitlesInTree="false"
                            xtype="pathfield"/>
                    </subscriptions>
                </items>
            </subscriptions>
            <edit
                jcr:primaryType="cq:Panel"
                title="Edit">
                <items jcr:primaryType="cq:WidgetCollection">
                    <allowediting
                        jcr:primaryType="cq:Widget"
                        defaultValue="permissionSensitive"
                        fieldLabel="Allow editing"
                        name="./allowEditing"
                        type="radio"
                        xtype="selection">
                        <options jcr:primaryType="cq:WidgetCollection">
                            <permissionsensitive
                                jcr:primaryType="nt:unstructured"
                                text="Permission sensitive"
                                value="permissionSensitive"/>
                            <onlyonauthor
                                jcr:primaryType="nt:unstructured"
                                text="Only on authoring instance"
                                value="onlyOnAuthor"/>
                            <never
                                jcr:primaryType="nt:unstructured"
                                text="Never"
                                value="never"/>
                        </options>
                    </allowediting>
                    <eventform
                        jcr:primaryType="cq:Widget"
                        fieldDescription="Choose an event form page. If empty, a child page named 'eventeditor' is used."
                        fieldLabel="Event edit form"
                        name="./eventForm"
                        predicate="siteadmin"
                        rootPath="/"
                        xtype="pathfield"/>
                    <editpattern
                        jcr:primaryType="cq:Widget"
                        fieldDescription="URL pattern. Will be used instead of edit form. Placeholders can be used, choose from below."
                        fieldLabel="Event edit pattern"
                        name="./eventEditPattern"
                        xtype="textfield"/>
                    <editpatternbuttons
                        jcr:primaryType="cq:Widget"
                        border="false"
                        layout="table"
                        xtype="cq.compositefield">
                        <defaults
                            jcr:primaryType="nt:unstructured"
                            style="padding: 0 5px 0 0"/>
                        <items jcr:primaryType="cq:WidgetCollection">
                            <eventplaceholderbutton
                                jcr:primaryType="cq:Widget"
                                text="Event path"
                                xtype="button">
                                <listeners
                                    jcr:primaryType="nt:unstructured"
                                    click="function(button, event) { var f = button.findParentByType('dialog').getField('./eventEditPattern'); var s = f.getValue(); f.setValue(s.substring(0, f.getCaretPosition()) + '{event}' + s.substring(f.getCaretPosition())); }"/>
                            </eventplaceholderbutton>
                            <urlplaceholderbutton
                                jcr:primaryType="cq:Widget"
                                text="URL from event"
                                xtype="button">
                                <listeners
                                    jcr:primaryType="nt:unstructured"
                                    click="function(button, event) { var f = button.findParentByType('dialog').getField('./eventEditPattern'); var s = f.getValue(); f.setValue(s.substring(0, f.getCaretPosition()) + '{url}' + s.substring(f.getCaretPosition())); }"/>
                            </urlplaceholderbutton>
                            <pageplaceholderbutton
                                jcr:primaryType="cq:Widget"
                                text="This page"
                                xtype="button">
                                <listeners
                                    jcr:primaryType="nt:unstructured"
                                    click="function(button, event) { var f = button.findParentByType('dialog').getField('./eventEditPattern'); var s = f.getValue(); f.setValue(s.substring(0, f.getCaretPosition()) + '{page}' + s.substring(f.getCaretPosition())); }"/>
                            </pageplaceholderbutton>
                            <homeplaceholderbutton
                                jcr:primaryType="cq:Widget"
                                text="User home"
                                xtype="button">
                                <listeners
                                    jcr:primaryType="nt:unstructured"
                                    click="function(button, event) { var f = button.findParentByType('dialog').getField('./eventEditPattern'); var s = f.getValue(); f.setValue(s.substring(0, f.getCaretPosition()) + '{home}' + s.substring(f.getCaretPosition())); }"/>
                            </homeplaceholderbutton>
                        </items>
                    </editpatternbuttons>
                </items>
            </edit>
            <view
                jcr:primaryType="cq:Panel"
                title="View">
                <items jcr:primaryType="cq:WidgetCollection">
                    <eventdisplay
                        jcr:primaryType="cq:Widget"
                        defaultValue="formPopup"
                        fieldLabel="Event display"
                        name="./eventDisplay"
                        type="radio"
                        xtype="selection">
                        <options jcr:primaryType="cq:WidgetCollection">
                            <formpopup
                                jcr:primaryType="nt:unstructured"
                                text="Embed view form in popup"
                                value="formPopup"/>
                            <patternpopup
                                jcr:primaryType="nt:unstructured"
                                text="Embed view pattern in popup"
                                value="patternPopup"/>
                            <eventurllink
                                jcr:primaryType="nt:unstructured"
                                text="Link to URL in event (using pattern as fallback)"
                                value="eventUrlLink"/>
                            <patternlink
                                jcr:primaryType="nt:unstructured"
                                text="Link to view pattern"
                                value="patternLink"/>
                        </options>
                    </eventdisplay>
                    <viewform
                        jcr:primaryType="cq:Widget"
                        fieldDescription="Choose an event form page. If empty, a child page named 'eventviewer' is used. Otherwise the event edit form will be used in read-only mode."
                        fieldLabel="Event view form"
                        name="./eventViewForm"
                        predicate="siteadmin"
                        rootPath="/"
                        xtype="pathfield"/>
                    <viewpattern
                        jcr:primaryType="cq:Widget"
                        fieldDescription="URL pattern. Placeholders can be used, choose from below."
                        fieldLabel="Event view pattern"
                        name="./eventViewPattern"
                        xtype="textfield"/>
                    <viewpatternbuttons
                        jcr:primaryType="cq:Widget"
                        border="false"
                        layout="table"
                        xtype="cq.compositefield">
                        <defaults
                            jcr:primaryType="nt:unstructured"
                            style="padding: 0 5px 0 0"/>
                        <items jcr:primaryType="cq:WidgetCollection">
                            <eventplaceholderbutton
                                jcr:primaryType="cq:Widget"
                                text="Event path"
                                xtype="button">
                                <listeners
                                    jcr:primaryType="nt:unstructured"
                                    click="function(button, event) { var f = button.findParentByType('dialog').getField('./eventViewPattern'); var s = f.getValue(); f.setValue(s.substring(0, f.getCaretPosition()) + '{event}' + s.substring(f.getCaretPosition())); }"/>
                            </eventplaceholderbutton>
                            <urlplaceholderbutton
                                jcr:primaryType="cq:Widget"
                                text="URL from event"
                                xtype="button">
                                <listeners
                                    jcr:primaryType="nt:unstructured"
                                    click="function(button, event) { var f = button.findParentByType('dialog').getField('./eventViewPattern'); var s = f.getValue(); f.setValue(s.substring(0, f.getCaretPosition()) + '{url}' + s.substring(f.getCaretPosition())); }"/>
                            </urlplaceholderbutton>
                            <pageplaceholderbutton
                                jcr:primaryType="cq:Widget"
                                text="This page"
                                xtype="button">
                                <listeners
                                    jcr:primaryType="nt:unstructured"
                                    click="function(button, event) { var f = button.findParentByType('dialog').getField('./eventViewPattern'); var s = f.getValue(); f.setValue(s.substring(0, f.getCaretPosition()) + '{page}' + s.substring(f.getCaretPosition())); }"/>
                            </pageplaceholderbutton>
                            <homeplaceholderbutton
                                jcr:primaryType="cq:Widget"
                                text="User home"
                                xtype="button">
                                <listeners
                                    jcr:primaryType="nt:unstructured"
                                    click="function(button, event) { var f = button.findParentByType('dialog').getField('./eventViewPattern'); var s = f.getValue(); f.setValue(s.substring(0, f.getCaretPosition()) + '{home}' + s.substring(f.getCaretPosition())); }"/>
                            </homeplaceholderbutton>
                        </items>
                    </viewpatternbuttons>
                </items>
            </view>
            <appearance
                jcr:primaryType="cq:Panel"
                title="Appearance">
                <items jcr:primaryType="cq:WidgetCollection">
                    <height
                        jcr:primaryType="cq:Widget"
                        anchor="{Boolean}false"
                        fieldDescription="Height of the calendar lens area in pixels (defaults to 500)"
                        fieldLabel="Calendar lens height"
                        name="./height"
                        width="100"
                        xtype="numberfield"/>
                    <showquerybuilder
                        jcr:primaryType="cq:Widget"
                        fieldDescription="Allow adding of querybuilder predicates"
                        fieldLabel="Show querybuilder"
                        name="./showQuerybuilder"
                        type="checkbox"
                        xtype="selection"/>
                    <eventpopupsize
                        jcr:primaryType="cq:Widget"
                        fieldDescription="Define width &amp;times; height."
                        fieldLabel="Event view popup size"
                        heightParameter="./eventPopupHeight"
                        widthParameter="./eventPopupWidth"
                        xtype="sizefield"/>
                    <eventdialogsize
                        jcr:primaryType="cq:Widget"
                        fieldDescription="Define width &amp;times; height."
                        fieldLabel="Event edit dialog size"
                        heightParameter="./eventDialogHeight"
                        widthParameter="./eventDialogWidth"
                        xtype="sizefield"/>
                    <defaultlens
                        jcr:primaryType="cq:Widget"
                        fieldDescription="Please enter the name of the lens, e.g. &quot;agenda&quot;."
                        fieldLabel="Default lens"
                        name="./defaultLens"
                        xtype="textfield"/>
                </items>
            </appearance>
        </items>
    </items>
</jcr:root>
