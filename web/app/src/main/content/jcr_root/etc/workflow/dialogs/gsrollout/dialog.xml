<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:cq="http://www.day.com/jcr/cq/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0"
    jcr:primaryType="cq:Dialog"
    title="GS Rollout - Council Selection Dialog"
    xtype="dialog">
    <items jcr:primaryType="cq:WidgetCollection">
        <councils
            jcr:primaryType="cq:Widget"
            fieldLabel="Councils"
            name="./councils"
            options="/etc/council-report/council-list.json"
            type="checkbox"
            xtype="selection">
            <listeners
            	jcr:primaryType="nt:unstructured"
            	beforerender="function(){  
            		var chkboxes = this;
            		var chkboxlist = chkboxes.items.items;
            		this.insert(0, new CQ.Ext.Button({
	                'text':'Select/Deselect All',
                	handler : function(){
                		var selecting = false;
                    	CQ.Ext.each(chkboxlist, function(c){
							if(c.getXType() == 'checkbox'){
								if(c.getValue() == false){
									selecting = true;
								}
							}
						});
						CQ.Ext.each(chkboxlist, function(c){
							if (c.setValue) { 
								if(selecting){
									c.setValue('true'); 
								}else{
									c.setValue('false');
								}
							} 
						return true; } );
                	}
            	}));
            }"/>
        </councils>
        <donotsend
        	jcr:primaryType="cq:Widget"
        	fieldLabel="Do Not Send Any Emails"
        	name="./dontsend"
        	type="checkbox"
        	xtype="selection"/>
       	<subject
       		jcr:primaryType="cq:Widget"
       		fieldLabel="Email Subject"
       		name="./subject"
       		defaultValue="GSUSA Rollout Notification"
       		value="GSUSA Rollout Notification"
       		xtype="textfield"/>
        <message
        	jcr:primaryType="cq:Widget"
        	fieldLabel="Custom Message"
        	height="{Long}100"
        	name="./message"
        	defaultValue="&lt;p&gt;Dear Council, &lt;/p&gt;&#xA;&lt;p&gt;It has been detected that one or more component(s) on the following page(s) has been modified by GSUSA. Please review and make any updates to content or simply reinstate the inheritance(s). If you choose to reinstate the inheritance(s) please be aware that you will be &lt;b&gt;discarding&lt;/b&gt; your own changes (custom content) that have been made to this page and will &lt;b&gt;immediately&lt;/b&gt; receive the new national content.&lt;/p&gt;&#xA;&lt;p&gt;&lt;b&gt;National page URL:&lt;/b&gt; &lt;%template-page%&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;b&gt;Your page URL:&lt;/b&gt; &lt;%council-page%&gt;&lt;/p&gt;&#xA;&lt;p&gt;Click &lt;a href='&lt;%council-author-page%&gt;'&gt;here&lt;/a&gt; to edit your page.&lt;/p&gt;"
        	value="&lt;p&gt;Dear Council, &lt;/p&gt;&#xA;&lt;p&gt;It has been detected that one or more component(s) on the following page(s) has been modified by GSUSA. Please review and make any updates to content or simply reinstate the inheritance(s). If you choose to reinstate the inheritance(s) please be aware that you will be &lt;b&gt;discarding&lt;/b&gt; your own changes (custom content) that have been made to this page and will &lt;b&gt;immediately&lt;/b&gt; receive the new national content.&lt;/p&gt;&#xA;&lt;p&gt;&lt;b&gt;National page URL:&lt;/b&gt; &lt;%template-page%&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;b&gt;Your page URL:&lt;/b&gt; &lt;%council-page%&gt;&lt;/p&gt;&#xA;&lt;p&gt;Click &lt;a href='&lt;%council-author-page%&gt;'&gt;here&lt;/a&gt; to edit your page.&lt;/p&gt;"
        	xtype="textarea"/>
       	<usetemplate
       		jcr:primaryType="cq:Widget"
       		fieldLabel="Use Email Template (Message AND Subject)"
       		name="./useTemplate"
       		type="checkbox"
       		xtype="selection"/>
       	<template
       		jcr:primaryType="cq:Widget"
       		fieldLabel="Email Template"
       		name="./template"
       		xtype="pathfield"/>
    </items>
</jcr:root>
