<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:cq="http://www.day.com/jcr/cq/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0"
    jcr:primaryType="cq:Dialog"
    title="GS New Page Rollout - Council Selection Dialog"
    xtype="dialog">
    <items jcr:primaryType="cq:WidgetCollection">
    	<primarypath
    		jcr:primaryType="cq:Widget"
    		fieldLabel="Primary Path to new page's directory"
    		fieldDescription="Because councils may move pages around or rename them, it is possible that this workflow won't be able to find them. Please set a path to attempt to place the new page, starting with /en. Defaults to the template page's path (e.g. /en/about-girl-scouts-who-we-are)"
    		name="./primaryPath"
    		xtype="textfield"/>
    	<backuppath
    		jcr:primaryType="cq:Widget"
    		fieldLabel="Backup path to new page's directory"
    		fieldDescription="If the workflow cannot find the directory in the above field, it will attempt to put the new page here instead. If this field is left blank, OR if the workflow cannot find the backup path for a council, it will place the new page under /en, as a child of the homepage. NOTE: if the page is rolled out under a backup path, it will not be activated automatically."
    		name="./backupPath"
    		xtype="textfield"/>
    	<activate
    		jcr:primaryType="cq:Widget"
    		fieldLabel="Activate new page?"
    		fieldDescription="If checked, the new pages will activate for production or preview, but only if they can be placed in their primary path."
    		name="./activate"
    		type="checkbox"
    		xtype="selection"/>
        <councils
            jcr:primaryType="cq:Widget"
            fieldLabel="Councils"
            name="./councils"
            options="/etc/council-report/council-list.json"
            type="checkbox"
            xtype="selection">
            <listeners
            	jcr:primaryType="nt:unstructured"
            	beforerender="function(){  
            		var chkboxes = this;
            		var chkboxlist = chkboxes.items.items;
            		this.insert(0, new CQ.Ext.Button({
	                'text':'Select/Deselect All',
                	handler : function(){
                		var selecting = false;
                    	CQ.Ext.each(chkboxlist, function(c){
							if(c.getXType() == 'checkbox'){
								if(c.getValue() == false){
									selecting = true;
								}
							}
						});
						CQ.Ext.each(chkboxlist, function(c){
							if (c.setValue) { 
								if(selecting){
									c.setValue('true'); 
								}else{
									c.setValue('false');
								}
							} 
						return true; } );
                	}
            	}));
            }"/>
        </councils>
        <donotsend
        	jcr:primaryType="cq:Widget"
        	fieldLabel="Do Not Send Any Emails"
        	name="./dontsend"
        	type="checkbox"
        	xtype="selection"/>
       	<subject
       		jcr:primaryType="cq:Widget"
       		fieldLabel="Email Subject"
       		name="./subject"
       		defaultValue="GSUSA Rollout Notification"
       		value="GSUSA Rollout Notification"
       		xtype="textfield"/>
        <message
            jcr:primaryType="cq:Widget"
            fieldLabel="Custom Message"
            height="{Long}300"
            name="./message"
            defaultValue="&lt;p&gt;Dear Council, &lt;/p&gt;&#xA;&lt;p&gt;It has been detected that one or more component(s) on the following page(s) has been modified by GSUSA. Please review and make any updates to content or simply reinstate the inheritance(s). If you choose to reinstate the inheritance(s) please be aware that you will be &lt;b&gt;discarding&lt;/b&gt; your own changes (custom content) that have been made to this page and will &lt;b&gt;immediately&lt;/b&gt; receive the new national content.&lt;/p&gt;&#xA;&lt;p&gt;&lt;b&gt;National page URL:&lt;/b&gt; &lt;%template-page%&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;b&gt;Your page URL:&lt;/b&gt; &lt;%council-page%&gt;&lt;/p&gt;&#xA;&lt;p&gt;Click &lt;%a href='&lt;%council-author-page%&gt;'&gt;here&lt;%/a&gt; to edit your page.&lt;/p&gt;"
        	value="&lt;p&gt;Dear Council, &lt;/p&gt;&#xA;&lt;p&gt;It has been detected that one or more component(s) on the following page(s) has been modified by GSUSA. Please review and make any updates to content or simply reinstate the inheritance(s). If you choose to reinstate the inheritance(s) please be aware that you will be &lt;b&gt;discarding&lt;/b&gt; your own changes (custom content) that have been made to this page and will &lt;b&gt;immediately&lt;/b&gt; receive the new national content.&lt;/p&gt;&#xA;&lt;p&gt;&lt;b&gt;National page URL:&lt;/b&gt; &lt;%template-page%&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;b&gt;Your page URL:&lt;/b&gt; &lt;%council-page%&gt;&lt;/p&gt;&#xA;&lt;p&gt;Click &lt;%a href='&lt;%council-author-page%&gt;'&gt;here&lt;%/a&gt; to edit your page.&lt;/p&gt;"
            xtype="richtext">
            <rtePlugins jcr:primaryType="nt:unstructured">
                <links jcr:primaryType="nt:unstructured">
                    <linkDialogConfig
                        jcr:primaryType="nt:unstructured"
                        height="{Long}316">
                        <linkAttributes jcr:primaryType="cq:WidgetCollection">
                            <linkAdvanced
                                jcr:primaryType="cq:Widget"
                                collapsed="{Boolean}true"
                                collapsible="{Boolean}true"
                                inputValue="advanced"
                                name="./linkdialog/cq:adhocLinkTrackingTab"
                                title="Link tracking"
                                xtype="dialogfieldset">
                                <items jcr:primaryType="cq:WidgetCollection">
                                    <enable
                                        jcr:primaryType="nt:unstructured"
                                        attribute="enabletracking"
                                        fieldDescription="override analytics framework settings"
                                        fieldLabel="Custom link tracking"
                                        name="./linkdialog/cq:adhocLinkTrackingEnableTracking"
                                        xtype="checkbox">
                                        <listeners
                                            jcr:primaryType="nt:unstructured"
                                            check="function(component){var dlg=component.findParentByType('rtelinkdialog');dlg.enableSCFields(component.checked);}"/>
                                    </enable>
                                    <events
                                        jcr:primaryType="nt:unstructured"
                                        attribute="adhocevents"
                                        fieldDescription="e.g.: event2, event7"
                                        fieldLabel="Include SiteCatalyst events"
                                        name="./linkdialog/cq:adhocLinkTrackingEvents"
                                        xtype="textfield"/>
                                    <evars
                                        jcr:primaryType="nt:unstructured"
                                        attribute="adhocevars"
                                        fieldDescription="e.g.: eVar1: pagedata.url, prop4: 'const'"
                                        fieldLabel="Include SiteCatalyst variables"
                                        name="./linkdialog/cq:adhocLinkTrackingEvars"
                                        xtype="textfield"/>
                                </items>
                            </linkAdvanced>
                        </linkAttributes>
                    </linkDialogConfig>
                </links>
                <misctools
                    jcr:primaryType="nt:unstructured"
                    features="*"/>
                <edit
                    jcr:primaryType="nt:unstructured"
                    features="[paste-plaintext,paste-wordhtml]"/>
                <findreplace
                    jcr:primaryType="nt:unstructured"
                    features="*"/>
                <format
                    jcr:primaryType="nt:unstructured"
                    features="*"/>
                <image
                    jcr:primaryType="nt:unstructured"
                    features="*"/>
                <keys
                    jcr:primaryType="nt:unstructured"
                    features="*"/>
                <justify
                    jcr:primaryType="nt:unstructured"
                    features="*"/>
                <lists
                    jcr:primaryType="nt:unstructured"
                    features="*"/>
                <paraformat
                    jcr:primaryType="nt:unstructured"
                    features="*">
                    <formats jcr:primaryType="cq:WidgetCollection">
                        <p
                            jcr:primaryType="nt:unstructured"
                            description="Paragraph"
                            tag="p"/>
                        <h1
                            jcr:primaryType="nt:unstructured"
                            description="Header 1"
                            tag="h1"/>
                        <h2
                            jcr:primaryType="nt:unstructured"
                            description="Header 2"
                            tag="h2"/>
                        <h3
                            jcr:primaryType="nt:unstructured"
                            description="Header 3"
                            tag="h3"/>
                        <h4
                            jcr:primaryType="nt:unstructured"
                            description="Header 4"
                            tag="h4"/>
                        <h5
                            jcr:primaryType="nt:unstructured"
                            description="Header 5"
                            tag="h5"/>
                        <h6
                            jcr:primaryType="nt:unstructured"
                            description="Header 6"
                            tag="h6"/>
                    </formats>
                </paraformat>
                <spellcheck
                    jcr:primaryType="nt:unstructured"
                    features="*"/>
                <styles
                    jcr:primaryType="nt:unstructured"
                    features="*"/>
                <subsuperscript
                    jcr:primaryType="nt:unstructured"
                    features="*"/>
                <table
                    jcr:primaryType="nt:unstructured"
                    features="*"/>
                <undo
                    jcr:primaryType="nt:unstructured"
                    features="*"/>
            </rtePlugins>
            <specialCharsConfig jcr:primaryType="nt:unstructured">
                <chars jcr:primaryType="nt:unstructured">
                    <em-dash
                        jcr:primaryType="nt:unstructured"
                        entity="&amp;#8212;"/>
                    <copyright
                        jcr:primaryType="nt:unstructured"
                        entity="&amp;#169;"/>
                    <registered
                        jcr:primaryType="nt:unstructured"
                        entity="&amp;#174;"/>
                    <trademark
                        jcr:primaryType="nt:unstructured"
                        entity="&amp;#8482;"/>
                    <horizontal-rule
                        jcr:primaryType="nt:unstructured"
                        displayEntity="HR"
                        entity="&lt;hr>"/>
                </chars>
            </specialCharsConfig>
        </message>
       	<usetemplate
       		jcr:primaryType="cq:Widget"
       		fieldLabel="Use Email Template (Message AND Subject)"
       		name="./useTemplate"
       		type="checkbox"
       		xtype="selection"/>
       	<template
       		jcr:primaryType="cq:Widget"
       		fieldLabel="Email Template"
       		name="./template"
       		xtype="pathfield"/>
    </items>
</jcr:root>
